2025-11-28 14:04:31.903 +01:00 [INF] Starting Monetaris API
2025-11-28 14:04:32.392 +01:00 [INF] Applying database migrations...
2025-11-28 14:04:33.211 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT migration_id, product_version
FROM "__EFMigrationsHistory"
ORDER BY migration_id;
2025-11-28 14:04:33.374 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    migration_id character varying(150) NOT NULL,
    product_version character varying(32) NOT NULL,
    CONSTRAINT pk___ef_migrations_history PRIMARY KEY (migration_id)
);
2025-11-28 14:04:33.383 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-28 14:04:33.387 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-11-28 14:04:33.388 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT migration_id, product_version
FROM "__EFMigrationsHistory"
ORDER BY migration_id;
2025-11-28 14:04:33.397 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-11-28 14:04:33.404 +01:00 [INF] Database migrations applied successfully
2025-11-28 14:04:33.622 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM kreditoren AS k)
2025-11-28 14:04:33.629 +01:00 [INF] Database already seeded, skipping...
2025-11-28 14:04:33.716 +01:00 [INF] Monetaris API started successfully
2025-11-28 14:04:33.741 +01:00 [INF] User profile is available. Using 'C:\Users\fandrich\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-28 14:04:33.842 +01:00 [INF] Now listening on: http://localhost:4002
2025-11-28 14:04:33.842 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-28 14:04:33.842 +01:00 [INF] Hosting environment: Development
2025-11-28 14:04:33.842 +01:00 [INF] Content root path: C:\Users\fandrich\OneDrive - Strukturschmiede - Ihr Erfolg GmbH\Mieterverwaltung\Mahnwesen\Monetaris\Backend\MonetarisApi
2025-11-28 14:11:01.003 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4002/api/dashboard/statistics - null null
2025-11-28 14:11:01.003 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4002/api/dashboard/statistics - null null
2025-11-28 14:11:01.029 +01:00 [WRN] Failed to determine the https port for redirect.
2025-11-28 14:11:01.031 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.031 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.033 +01:00 [INF] HTTP OPTIONS /api/dashboard/statistics responded 204 in 11.2442 ms
2025-11-28 14:11:01.033 +01:00 [INF] HTTP OPTIONS /api/dashboard/statistics responded 204 in 11.3209 ms
2025-11-28 14:11:01.039 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:4002/api/dashboard/statistics - 204 null null 37.6205ms
2025-11-28 14:11:01.039 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:4002/api/dashboard/statistics - 204 null null 37.6289ms
2025-11-28 14:11:01.046 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:4002/api/dashboard/statistics - application/json null
2025-11-28 14:11:01.050 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.121 +01:00 [INF] Executing endpoint 'Monetaris.Dashboard.Api.GetStatistics.Handle (Monetaris.Dashboard)'
2025-11-28 14:11:01.134 +01:00 [INF] Route matched with {action = "Handle", controller = "GetStatistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Handle() on controller Monetaris.Dashboard.Api.GetStatistics (Monetaris.Dashboard).
2025-11-28 14:11:01.137 +01:00 [INF] GetStatistics endpoint called
2025-11-28 14:11:01.267 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2025-11-28 14:11:01.346 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.additional_costs, c.agent_id, c.ai_analysis, c.claim_description, c.competent_court, c.costs, c.court_file_number, c.created_at, c.currency, c.date_of_origin, c.debtor_id, c.due_date, c.interest, c.interest_end_date, c.interest_on_costs, c.interest_rate, c.interest_start_date, c.invoice_date, c.invoice_number, c.is_variable_interest, c.kreditor_id, c.next_action_date, c.payment_allocation_notes, c.principal_amount, c.procedure_costs, c.status, c.statute_of_limitations_date, c.updated_at
FROM cases AS c
2025-11-28 14:11:01.439 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM debtors AS d
2025-11-28 14:11:01.448 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM kreditoren AS k
2025-11-28 14:11:01.449 +01:00 [INF] Retrieved dashboard stats for user "00000000-0000-0000-0000-000000000010"
2025-11-28 14:11:01.449 +01:00 [INF] Successfully retrieved statistics for user "00000000-0000-0000-0000-000000000010"
2025-11-28 14:11:01.454 +01:00 [INF] Executing OkObjectResult, writing value of type 'Monetaris.Dashboard.Models.DashboardStatsDto'.
2025-11-28 14:11:01.480 +01:00 [INF] Executed action Monetaris.Dashboard.Api.GetStatistics.Handle (Monetaris.Dashboard) in 343.4538ms
2025-11-28 14:11:01.480 +01:00 [INF] Executed endpoint 'Monetaris.Dashboard.Api.GetStatistics.Handle (Monetaris.Dashboard)'
2025-11-28 14:11:01.481 +01:00 [INF] HTTP GET /api/dashboard/statistics responded 200 in 433.9297 ms
2025-11-28 14:11:01.484 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:4002/api/dashboard/statistics - 200 null application/json; charset=utf-8 438.7246ms
2025-11-28 14:11:01.492 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:4002/api/dashboard/statistics - application/json null
2025-11-28 14:11:01.495 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.499 +01:00 [INF] Executing endpoint 'Monetaris.Dashboard.Api.GetStatistics.Handle (Monetaris.Dashboard)'
2025-11-28 14:11:01.499 +01:00 [INF] Route matched with {action = "Handle", controller = "GetStatistics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Handle() on controller Monetaris.Dashboard.Api.GetStatistics (Monetaris.Dashboard).
2025-11-28 14:11:01.502 +01:00 [INF] GetStatistics endpoint called
2025-11-28 14:11:01.554 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2025-11-28 14:11:01.561 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.additional_costs, c.agent_id, c.ai_analysis, c.claim_description, c.competent_court, c.costs, c.court_file_number, c.created_at, c.currency, c.date_of_origin, c.debtor_id, c.due_date, c.interest, c.interest_end_date, c.interest_on_costs, c.interest_rate, c.interest_start_date, c.invoice_date, c.invoice_number, c.is_variable_interest, c.kreditor_id, c.next_action_date, c.payment_allocation_notes, c.principal_amount, c.procedure_costs, c.status, c.statute_of_limitations_date, c.updated_at
FROM cases AS c
2025-11-28 14:11:01.582 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM debtors AS d
2025-11-28 14:11:01.583 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM kreditoren AS k
2025-11-28 14:11:01.584 +01:00 [INF] Retrieved dashboard stats for user "00000000-0000-0000-0000-000000000010"
2025-11-28 14:11:01.584 +01:00 [INF] Successfully retrieved statistics for user "00000000-0000-0000-0000-000000000010"
2025-11-28 14:11:01.584 +01:00 [INF] Executing OkObjectResult, writing value of type 'Monetaris.Dashboard.Models.DashboardStatsDto'.
2025-11-28 14:11:01.585 +01:00 [INF] Executed action Monetaris.Dashboard.Api.GetStatistics.Handle (Monetaris.Dashboard) in 85.3862ms
2025-11-28 14:11:01.585 +01:00 [INF] Executed endpoint 'Monetaris.Dashboard.Api.GetStatistics.Handle (Monetaris.Dashboard)'
2025-11-28 14:11:01.585 +01:00 [INF] HTTP GET /api/dashboard/statistics responded 200 in 91.7855 ms
2025-11-28 14:11:01.585 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:4002/api/dashboard/statistics - 200 null application/json; charset=utf-8 93.4039ms
2025-11-28 14:11:01.611 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4002/api/inquiries - null null
2025-11-28 14:11:01.611 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.611 +01:00 [INF] HTTP OPTIONS /api/inquiries responded 204 in 0.2178 ms
2025-11-28 14:11:01.611 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:4002/api/inquiries - 204 null null 0.6664ms
2025-11-28 14:11:01.611 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4002/api/inquiries - null null
2025-11-28 14:11:01.612 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.612 +01:00 [INF] HTTP OPTIONS /api/inquiries responded 204 in 0.1234 ms
2025-11-28 14:11:01.612 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:4002/api/inquiries - 204 null null 0.3383ms
2025-11-28 14:11:01.615 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:4002/api/inquiries - application/json null
2025-11-28 14:11:01.616 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.618 +01:00 [INF] Executing endpoint 'Monetaris.Inquiry.Api.GetInquiries.Handle (Monetaris.Inquiry)'
2025-11-28 14:11:01.623 +01:00 [INF] Route matched with {action = "Handle", controller = "GetInquiries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Handle() on controller Monetaris.Inquiry.Api.GetInquiries (Monetaris.Inquiry).
2025-11-28 14:11:01.625 +01:00 [INF] GetInquiries endpoint called
2025-11-28 14:11:01.627 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2025-11-28 14:11:01.678 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT i.id, i.answer, i.case_id, i.created_at, i.created_by, i.question, i.resolved_at, i.status, i.updated_at, c.id, c.additional_costs, c.agent_id, c.ai_analysis, c.claim_description, c.competent_court, c.costs, c.court_file_number, c.created_at, c.currency, c.date_of_origin, c.debtor_id, c.due_date, c.interest, c.interest_end_date, c.interest_on_costs, c.interest_rate, c.interest_start_date, c.invoice_date, c.invoice_number, c.is_variable_interest, c.kreditor_id, c.next_action_date, c.payment_allocation_notes, c.principal_amount, c.procedure_costs, c.status, c.statute_of_limitations_date, c.updated_at, d.id, d.additional_address_info, d.address_last_checked, d.address_status, d.agent_id, d.bank_bic, d.bank_iban, d.bank_name, d.birth_country, d.birth_name, d.birth_place, d.city, d.city_district, d.company_name, d.country, d.created_at, d.date_of_birth, d.door_position, d.ebo_address, d.email, d.entity_type, d.fax, d.file_reference, d.first_name, d.floor, d.gender, d.house_number, d.is_deceased, d.kreditor_id, d.last_name, d.notes, d.open_cases, d.po_box, d.po_box_zip_code, d.partners, d.phone_landline, d.phone_mobile, d.place_of_death, d.register_court, d.register_number, d.represented_by, d.risk_score, d.street, d.total_debt, d.updated_at, d.vat_id, d.zip_code, k.id, k.additional_address_info, k.bank_account_iban, k.bank_bic, k.bank_name, k.birth_country, k.birth_name, k.birth_place, k.city, k.city_district, k.contact_email, k.country, k.created_at, k.date_of_birth, k.door_position, k.ebo_address, k.entity_type, k.fax, k.file_reference, k.first_name, k.floor, k.gender, k.house_number, k.is_deceased, k.last_name, k.name, k.po_box, k.po_box_zip_code, k.partners, k.phone_landline, k.phone_mobile, k.place_of_death, k.register_court, k.registration_number, k.represented_by, k.street, k.updated_at, k.vat_id, k.zip_code, u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
FROM inquiries AS i
INNER JOIN cases AS c ON i.case_id = c.id
INNER JOIN debtors AS d ON c.debtor_id = d.id
INNER JOIN kreditoren AS k ON c.kreditor_id = k.id
INNER JOIN users AS u ON i.created_by = u.id
ORDER BY i.created_at DESC
2025-11-28 14:11:01.800 +01:00 [INF] Retrieved 69 inquiries for user "00000000-0000-0000-0000-000000000010"
2025-11-28 14:11:01.801 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Monetaris.Inquiry.Models.InquiryDto, Monetaris.Inquiry, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 14:11:01.820 +01:00 [INF] Executed action Monetaris.Inquiry.Api.GetInquiries.Handle (Monetaris.Inquiry) in 197.2062ms
2025-11-28 14:11:01.820 +01:00 [INF] Executed endpoint 'Monetaris.Inquiry.Api.GetInquiries.Handle (Monetaris.Inquiry)'
2025-11-28 14:11:01.821 +01:00 [INF] HTTP GET /api/inquiries responded 200 in 204.9438 ms
2025-11-28 14:11:01.821 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:4002/api/inquiries - 200 null application/json; charset=utf-8 205.4081ms
2025-11-28 14:11:01.833 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:4002/api/inquiries - application/json null
2025-11-28 14:11:01.834 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.835 +01:00 [INF] Executing endpoint 'Monetaris.Inquiry.Api.GetInquiries.Handle (Monetaris.Inquiry)'
2025-11-28 14:11:01.835 +01:00 [INF] Route matched with {action = "Handle", controller = "GetInquiries"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Handle() on controller Monetaris.Inquiry.Api.GetInquiries (Monetaris.Inquiry).
2025-11-28 14:11:01.836 +01:00 [INF] GetInquiries endpoint called
2025-11-28 14:11:01.840 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2025-11-28 14:11:01.845 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT i.id, i.answer, i.case_id, i.created_at, i.created_by, i.question, i.resolved_at, i.status, i.updated_at, c.id, c.additional_costs, c.agent_id, c.ai_analysis, c.claim_description, c.competent_court, c.costs, c.court_file_number, c.created_at, c.currency, c.date_of_origin, c.debtor_id, c.due_date, c.interest, c.interest_end_date, c.interest_on_costs, c.interest_rate, c.interest_start_date, c.invoice_date, c.invoice_number, c.is_variable_interest, c.kreditor_id, c.next_action_date, c.payment_allocation_notes, c.principal_amount, c.procedure_costs, c.status, c.statute_of_limitations_date, c.updated_at, d.id, d.additional_address_info, d.address_last_checked, d.address_status, d.agent_id, d.bank_bic, d.bank_iban, d.bank_name, d.birth_country, d.birth_name, d.birth_place, d.city, d.city_district, d.company_name, d.country, d.created_at, d.date_of_birth, d.door_position, d.ebo_address, d.email, d.entity_type, d.fax, d.file_reference, d.first_name, d.floor, d.gender, d.house_number, d.is_deceased, d.kreditor_id, d.last_name, d.notes, d.open_cases, d.po_box, d.po_box_zip_code, d.partners, d.phone_landline, d.phone_mobile, d.place_of_death, d.register_court, d.register_number, d.represented_by, d.risk_score, d.street, d.total_debt, d.updated_at, d.vat_id, d.zip_code, k.id, k.additional_address_info, k.bank_account_iban, k.bank_bic, k.bank_name, k.birth_country, k.birth_name, k.birth_place, k.city, k.city_district, k.contact_email, k.country, k.created_at, k.date_of_birth, k.door_position, k.ebo_address, k.entity_type, k.fax, k.file_reference, k.first_name, k.floor, k.gender, k.house_number, k.is_deceased, k.last_name, k.name, k.po_box, k.po_box_zip_code, k.partners, k.phone_landline, k.phone_mobile, k.place_of_death, k.register_court, k.registration_number, k.represented_by, k.street, k.updated_at, k.vat_id, k.zip_code, u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
FROM inquiries AS i
INNER JOIN cases AS c ON i.case_id = c.id
INNER JOIN debtors AS d ON c.debtor_id = d.id
INNER JOIN kreditoren AS k ON c.kreditor_id = k.id
INNER JOIN users AS u ON i.created_by = u.id
ORDER BY i.created_at DESC
2025-11-28 14:11:01.853 +01:00 [INF] Retrieved 69 inquiries for user "00000000-0000-0000-0000-000000000010"
2025-11-28 14:11:01.853 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Monetaris.Inquiry.Models.InquiryDto, Monetaris.Inquiry, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 14:11:01.853 +01:00 [INF] Executed action Monetaris.Inquiry.Api.GetInquiries.Handle (Monetaris.Inquiry) in 18.4518ms
2025-11-28 14:11:01.854 +01:00 [INF] Executed endpoint 'Monetaris.Inquiry.Api.GetInquiries.Handle (Monetaris.Inquiry)'
2025-11-28 14:11:01.854 +01:00 [INF] HTTP GET /api/inquiries responded 200 in 20.0084 ms
2025-11-28 14:11:01.854 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:4002/api/inquiries - 200 null application/json; charset=utf-8 20.5923ms
2025-11-28 14:11:01.940 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4002/api/cases - null null
2025-11-28 14:11:01.940 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4002/api/cases - null null
2025-11-28 14:11:01.941 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.941 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.941 +01:00 [INF] HTTP OPTIONS /api/cases responded 204 in 0.3726 ms
2025-11-28 14:11:01.941 +01:00 [INF] HTTP OPTIONS /api/cases responded 204 in 0.3723 ms
2025-11-28 14:11:01.941 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:4002/api/cases - 204 null null 1.2022ms
2025-11-28 14:11:01.941 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:4002/api/cases - 204 null null 1.202ms
2025-11-28 14:11:01.947 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:4002/api/cases - application/json null
2025-11-28 14:11:01.948 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:01.948 +01:00 [INF] Executing endpoint 'Monetaris.Case.Api.GetAllCases.Handle (Monetaris.Case)'
2025-11-28 14:11:01.959 +01:00 [INF] Route matched with {action = "Handle", controller = "GetAllCases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Handle(Monetaris.Case.Models.CaseFilterRequest) on controller Monetaris.Case.Api.GetAllCases (Monetaris.Case).
2025-11-28 14:11:01.969 +01:00 [INF] GetAllCases endpoint called with filters: KreditorId=null, Status=null, Page=1, PageSize=20
2025-11-28 14:11:01.974 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2025-11-28 14:11:01.983 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM cases AS c
2025-11-28 14:11:02.008 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0.id, c0.additional_costs, c0.agent_id, c0.ai_analysis, c0.claim_description, c0.competent_court, c0.costs, c0.court_file_number, c0.created_at, c0.currency, c0.date_of_origin, c0.debtor_id, c0.due_date, c0.interest, c0.interest_end_date, c0.interest_on_costs, c0.interest_rate, c0.interest_start_date, c0.invoice_date, c0.invoice_number, c0.is_variable_interest, c0.kreditor_id, c0.next_action_date, c0.payment_allocation_notes, c0.principal_amount, c0.procedure_costs, c0.status, c0.statute_of_limitations_date, c0.updated_at, d.id, d.additional_address_info, d.address_last_checked, d.address_status, d.agent_id, d.bank_bic, d.bank_iban, d.bank_name, d.birth_country, d.birth_name, d.birth_place, d.city, d.city_district, d.company_name, d.country, d.created_at, d.date_of_birth, d.door_position, d.ebo_address, d.email, d.entity_type, d.fax, d.file_reference, d.first_name, d.floor, d.gender, d.house_number, d.is_deceased, d.kreditor_id, d.last_name, d.notes, d.open_cases, d.po_box, d.po_box_zip_code, d.partners, d.phone_landline, d.phone_mobile, d.place_of_death, d.register_court, d.register_number, d.represented_by, d.risk_score, d.street, d.total_debt, d.updated_at, d.vat_id, d.zip_code, k.id, k.additional_address_info, k.bank_account_iban, k.bank_bic, k.bank_name, k.birth_country, k.birth_name, k.birth_place, k.city, k.city_district, k.contact_email, k.country, k.created_at, k.date_of_birth, k.door_position, k.ebo_address, k.entity_type, k.fax, k.file_reference, k.first_name, k.floor, k.gender, k.house_number, k.is_deceased, k.last_name, k.name, k.po_box, k.po_box_zip_code, k.partners, k.phone_landline, k.phone_mobile, k.place_of_death, k.register_court, k.registration_number, k.represented_by, k.street, k.updated_at, k.vat_id, k.zip_code
FROM (
    SELECT c.id, c.additional_costs, c.agent_id, c.ai_analysis, c.claim_description, c.competent_court, c.costs, c.court_file_number, c.created_at, c.currency, c.date_of_origin, c.debtor_id, c.due_date, c.interest, c.interest_end_date, c.interest_on_costs, c.interest_rate, c.interest_start_date, c.invoice_date, c.invoice_number, c.is_variable_interest, c.kreditor_id, c.next_action_date, c.payment_allocation_notes, c.principal_amount, c.procedure_costs, c.status, c.statute_of_limitations_date, c.updated_at
    FROM cases AS c
    ORDER BY c.created_at DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN debtors AS d ON c0.debtor_id = d.id
INNER JOIN kreditoren AS k ON c0.kreditor_id = k.id
ORDER BY c0.created_at DESC
2025-11-28 14:11:02.013 +01:00 [INF] Retrieved 20 cases (page 1) for user "00000000-0000-0000-0000-000000000010"
2025-11-28 14:11:02.013 +01:00 [INF] Retrieved 20 cases for user "00000000-0000-0000-0000-000000000010" (page 1)
2025-11-28 14:11:02.013 +01:00 [INF] Executing OkObjectResult, writing value of type 'Monetaris.Shared.Models.PaginatedResult`1[[Monetaris.Case.Models.CaseListDto, Monetaris.Case, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 14:11:02.021 +01:00 [INF] Executed action Monetaris.Case.Api.GetAllCases.Handle (Monetaris.Case) in 60.8928ms
2025-11-28 14:11:02.021 +01:00 [INF] Executed endpoint 'Monetaris.Case.Api.GetAllCases.Handle (Monetaris.Case)'
2025-11-28 14:11:02.021 +01:00 [INF] HTTP GET /api/cases responded 200 in 73.2583 ms
2025-11-28 14:11:02.021 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:4002/api/cases - 200 null application/json; charset=utf-8 73.7977ms
2025-11-28 14:11:02.031 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:4002/api/cases - application/json null
2025-11-28 14:11:02.032 +01:00 [INF] CORS policy execution successful.
2025-11-28 14:11:02.032 +01:00 [INF] Executing endpoint 'Monetaris.Case.Api.GetAllCases.Handle (Monetaris.Case)'
2025-11-28 14:11:02.033 +01:00 [INF] Route matched with {action = "Handle", controller = "GetAllCases"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Handle(Monetaris.Case.Models.CaseFilterRequest) on controller Monetaris.Case.Api.GetAllCases (Monetaris.Case).
2025-11-28 14:11:02.034 +01:00 [INF] GetAllCases endpoint called with filters: KreditorId=null, Status=null, Page=1, PageSize=20
2025-11-28 14:11:02.037 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
FROM users AS u
WHERE u.id = @__p_0
LIMIT 1
2025-11-28 14:11:02.041 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM cases AS c
2025-11-28 14:11:02.046 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0.id, c0.additional_costs, c0.agent_id, c0.ai_analysis, c0.claim_description, c0.competent_court, c0.costs, c0.court_file_number, c0.created_at, c0.currency, c0.date_of_origin, c0.debtor_id, c0.due_date, c0.interest, c0.interest_end_date, c0.interest_on_costs, c0.interest_rate, c0.interest_start_date, c0.invoice_date, c0.invoice_number, c0.is_variable_interest, c0.kreditor_id, c0.next_action_date, c0.payment_allocation_notes, c0.principal_amount, c0.procedure_costs, c0.status, c0.statute_of_limitations_date, c0.updated_at, d.id, d.additional_address_info, d.address_last_checked, d.address_status, d.agent_id, d.bank_bic, d.bank_iban, d.bank_name, d.birth_country, d.birth_name, d.birth_place, d.city, d.city_district, d.company_name, d.country, d.created_at, d.date_of_birth, d.door_position, d.ebo_address, d.email, d.entity_type, d.fax, d.file_reference, d.first_name, d.floor, d.gender, d.house_number, d.is_deceased, d.kreditor_id, d.last_name, d.notes, d.open_cases, d.po_box, d.po_box_zip_code, d.partners, d.phone_landline, d.phone_mobile, d.place_of_death, d.register_court, d.register_number, d.represented_by, d.risk_score, d.street, d.total_debt, d.updated_at, d.vat_id, d.zip_code, k.id, k.additional_address_info, k.bank_account_iban, k.bank_bic, k.bank_name, k.birth_country, k.birth_name, k.birth_place, k.city, k.city_district, k.contact_email, k.country, k.created_at, k.date_of_birth, k.door_position, k.ebo_address, k.entity_type, k.fax, k.file_reference, k.first_name, k.floor, k.gender, k.house_number, k.is_deceased, k.last_name, k.name, k.po_box, k.po_box_zip_code, k.partners, k.phone_landline, k.phone_mobile, k.place_of_death, k.register_court, k.registration_number, k.represented_by, k.street, k.updated_at, k.vat_id, k.zip_code
FROM (
    SELECT c.id, c.additional_costs, c.agent_id, c.ai_analysis, c.claim_description, c.competent_court, c.costs, c.court_file_number, c.created_at, c.currency, c.date_of_origin, c.debtor_id, c.due_date, c.interest, c.interest_end_date, c.interest_on_costs, c.interest_rate, c.interest_start_date, c.invoice_date, c.invoice_number, c.is_variable_interest, c.kreditor_id, c.next_action_date, c.payment_allocation_notes, c.principal_amount, c.procedure_costs, c.status, c.statute_of_limitations_date, c.updated_at
    FROM cases AS c
    ORDER BY c.created_at DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN debtors AS d ON c0.debtor_id = d.id
INNER JOIN kreditoren AS k ON c0.kreditor_id = k.id
ORDER BY c0.created_at DESC
2025-11-28 14:11:02.048 +01:00 [INF] Retrieved 20 cases (page 1) for user "00000000-0000-0000-0000-000000000010"
2025-11-28 14:11:02.048 +01:00 [INF] Retrieved 20 cases for user "00000000-0000-0000-0000-000000000010" (page 1)
2025-11-28 14:11:02.048 +01:00 [INF] Executing OkObjectResult, writing value of type 'Monetaris.Shared.Models.PaginatedResult`1[[Monetaris.Case.Models.CaseListDto, Monetaris.Case, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 14:11:02.049 +01:00 [INF] Executed action Monetaris.Case.Api.GetAllCases.Handle (Monetaris.Case) in 15.8965ms
2025-11-28 14:11:02.049 +01:00 [INF] Executed endpoint 'Monetaris.Case.Api.GetAllCases.Handle (Monetaris.Case)'
2025-11-28 14:11:02.049 +01:00 [INF] HTTP GET /api/cases responded 200 in 17.1811 ms
2025-11-28 14:11:02.049 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:4002/api/cases - 200 null application/json; charset=utf-8 17.6791ms
2025-11-28 15:24:18.220 +01:00 [INF] Starting Monetaris API
2025-11-28 15:24:19.059 +01:00 [INF] Applying database migrations...
2025-11-28 15:24:19.992 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT migration_id, product_version
FROM "__EFMigrationsHistory"
ORDER BY migration_id;
2025-11-28 15:24:20.133 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    migration_id character varying(150) NOT NULL,
    product_version character varying(32) NOT NULL,
    CONSTRAINT pk___ef_migrations_history PRIMARY KEY (migration_id)
);
2025-11-28 15:24:20.140 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-28 15:24:20.147 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-11-28 15:24:20.150 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT migration_id, product_version
FROM "__EFMigrationsHistory"
ORDER BY migration_id;
2025-11-28 15:24:20.157 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-11-28 15:24:20.173 +01:00 [INF] Database migrations applied successfully
2025-11-28 15:24:20.519 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM kreditoren AS k)
2025-11-28 15:24:20.526 +01:00 [INF] Database already seeded, skipping...
2025-11-28 15:24:20.756 +01:00 [INF] Monetaris API started successfully
2025-11-28 15:24:20.921 +01:00 [INF] User profile is available. Using 'C:\Users\fandrich\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-28 15:24:21.158 +01:00 [INF] Now listening on: http://localhost:3002
2025-11-28 15:24:21.158 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-28 15:24:21.158 +01:00 [INF] Hosting environment: Development
2025-11-28 15:24:21.159 +01:00 [INF] Content root path: C:\Users\fandrich\OneDrive - Strukturschmiede - Ihr Erfolg GmbH\Mieterverwaltung\Mahnwesen\Monetaris\Backend\MonetarisApi
2025-11-28 15:27:05.782 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:3002/api/auth/login - application/json 53
2025-11-28 15:27:05.818 +01:00 [WRN] Failed to determine the https port for redirect.
2025-11-28 15:27:06.115 +01:00 [INF] Executing endpoint 'Monetaris.User.Api.Login.LoginAsync (Monetaris.User)'
2025-11-28 15:27:06.144 +01:00 [INF] Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Monetaris.User.Models.LoginRequest) on controller Monetaris.User.Api.Login (Monetaris.User).
2025-11-28 15:27:06.205 +01:00 [INF] Login attempt for email: admin@monetaris.de
2025-11-28 15:27:06.456 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__request_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1.id, u1.avatar_initials, u1.created_at, u1.email, u1.is_active, u1.kreditor_id, u1.name, u1.password_hash, u1.role, u1.updated_at, u0.user_id, u0.kreditor_id, u0.created_at
FROM (
    SELECT u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
    FROM users AS u
    WHERE u.email = @__request_Email_0
    LIMIT 1
) AS u1
LEFT JOIN user_kreditor_assignments AS u0 ON u1.id = u0.user_id
ORDER BY u1.id, u0.user_id
2025-11-28 15:27:06.464 +01:00 [WRN] Login failed for email: admin@monetaris.de. Error: Invalid email or password
2025-11-28 15:27:06.468 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-28 15:27:06.486 +01:00 [INF] Executed action Monetaris.User.Api.Login.LoginAsync (Monetaris.User) in 336.51ms
2025-11-28 15:27:06.493 +01:00 [INF] Executed endpoint 'Monetaris.User.Api.Login.LoginAsync (Monetaris.User)'
2025-11-28 15:27:06.497 +01:00 [INF] HTTP POST /api/auth/login responded 400 in 685.3778 ms
2025-11-28 15:27:06.502 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:3002/api/auth/login - 400 null application/json; charset=utf-8 720.9419ms
2025-11-28 15:27:54.344 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:3002/api/auth/login - application/json 53
2025-11-28 15:27:54.350 +01:00 [INF] Executing endpoint 'Monetaris.User.Api.Login.LoginAsync (Monetaris.User)'
2025-11-28 15:27:54.351 +01:00 [INF] Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Monetaris.User.Models.LoginRequest) on controller Monetaris.User.Api.Login (Monetaris.User).
2025-11-28 15:27:54.359 +01:00 [INF] Login attempt for email: admin@monetaris.com
2025-11-28 15:27:54.421 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u1.id, u1.avatar_initials, u1.created_at, u1.email, u1.is_active, u1.kreditor_id, u1.name, u1.password_hash, u1.role, u1.updated_at, u0.user_id, u0.kreditor_id, u0.created_at
FROM (
    SELECT u.id, u.avatar_initials, u.created_at, u.email, u.is_active, u.kreditor_id, u.name, u.password_hash, u.role, u.updated_at
    FROM users AS u
    WHERE u.email = @__request_Email_0
    LIMIT 1
) AS u1
LEFT JOIN user_kreditor_assignments AS u0 ON u1.id = u0.user_id
ORDER BY u1.id, u0.user_id
2025-11-28 15:27:55.062 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO refresh_tokens (id, created_at, expires_at, revoked_at, token, updated_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-28 15:27:55.076 +01:00 [INF] Login successful for email: admin@monetaris.com
2025-11-28 15:27:55.078 +01:00 [INF] Executing OkObjectResult, writing value of type 'Monetaris.User.Models.AuthResponse'.
2025-11-28 15:27:55.109 +01:00 [INF] Executed action Monetaris.User.Api.Login.LoginAsync (Monetaris.User) in 756.5635ms
2025-11-28 15:27:55.109 +01:00 [INF] Executed endpoint 'Monetaris.User.Api.Login.LoginAsync (Monetaris.User)'
2025-11-28 15:27:55.109 +01:00 [INF] HTTP POST /api/auth/login responded 200 in 761.6376 ms
2025-11-28 15:27:55.109 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:3002/api/auth/login - 200 null application/json; charset=utf-8 765.9492ms
2025-11-28 15:33:23.935 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - null null
2025-11-28 15:33:23.938 +01:00 [INF] CORS policy execution failed.
2025-11-28 15:33:23.938 +01:00 [INF] Request origin http://localhost:4001 does not have permission to access the resource.
2025-11-28 15:33:23.939 +01:00 [INF] HTTP OPTIONS /api/auth/csrf-token responded 204 in 2.5742 ms
2025-11-28 15:33:23.939 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - 204 null null 3.7914ms
2025-11-28 15:33:25.338 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - null null
2025-11-28 15:33:25.339 +01:00 [INF] CORS policy execution failed.
2025-11-28 15:33:25.339 +01:00 [INF] Request origin http://localhost:4001 does not have permission to access the resource.
2025-11-28 15:33:25.340 +01:00 [INF] HTTP OPTIONS /api/auth/csrf-token responded 204 in 1.1613 ms
2025-11-28 15:33:25.340 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - 204 null null 1.9499ms
2025-11-28 15:33:29.818 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - null null
2025-11-28 15:33:29.818 +01:00 [INF] CORS policy execution failed.
2025-11-28 15:33:29.818 +01:00 [INF] Request origin http://localhost:4001 does not have permission to access the resource.
2025-11-28 15:33:29.819 +01:00 [INF] HTTP OPTIONS /api/auth/csrf-token responded 204 in 0.3647 ms
2025-11-28 15:33:29.819 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - 204 null null 0.9605ms
2025-11-28 15:33:34.060 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - null null
2025-11-28 15:33:34.061 +01:00 [INF] CORS policy execution failed.
2025-11-28 15:33:34.061 +01:00 [INF] Request origin http://localhost:4001 does not have permission to access the resource.
2025-11-28 15:33:34.061 +01:00 [INF] HTTP OPTIONS /api/auth/csrf-token responded 204 in 0.7816 ms
2025-11-28 15:33:34.061 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - 204 null null 1.5902ms
2025-11-28 15:33:34.819 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - null null
2025-11-28 15:33:34.820 +01:00 [INF] CORS policy execution failed.
2025-11-28 15:33:34.820 +01:00 [INF] Request origin http://localhost:4001 does not have permission to access the resource.
2025-11-28 15:33:34.820 +01:00 [INF] HTTP OPTIONS /api/auth/csrf-token responded 204 in 0.2977 ms
2025-11-28 15:33:34.820 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:3002/api/auth/csrf-token - 204 null null 0.7388ms
